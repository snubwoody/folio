import"../chunks/Bzak7iHL.js";import{i as K}from"../chunks/CwO4yEID.js";import{r as $,I as F,J as D,z as _,A as M,M as s,K as l,E as t,N as B,L as r,Q as I,w as P,av as G,P as H,at as V,v as R,ah as z}from"../chunks/DicYldSw.js";import{i as L}from"../chunks/CmpdaPHE.js";import{a as p,f as T,c as X,d as Z,e as N,P as ee,g as Q,S as te,h as J}from"../chunks/Cor0VQiW.js";import{M as ae,T as re}from"../chunks/D-kctbAX.js";import{T as oe}from"../chunks/UnsqR09w.js";var se=F('<p class="text-sm"> </p>'),le=F('<section class="flex items-center justify-between"><div><h5 class="svelte-gpgq6p">Montly budget</h5> <h3 class="svelte-gpgq6p"> </h3></div> <div><h5 class="svelte-gpgq6p">Expenses</h5> <h3 class="svelte-gpgq6p"> </h3> <!></div> <div><h5 class="svelte-gpgq6p">Income</h5> <h3 class="svelte-gpgq6p"> </h3></div></section>');function ne(g,o){$(o,!0);const e=new Date,v=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,1),u=p.incomes.filter(m=>{const d=new Date(m.date);return d>=v&&d<a}),h=p.expenses.filter(m=>{const d=new Date(m.date);return d>=v&&d<a}),c=p.budgets,n=I(()=>h.reduce((m,d)=>m+parseFloat(d.amount),0)),x=I(()=>u.reduce((m,d)=>m+parseFloat(d.amount),0)),f=I(()=>c.reduce((m,d)=>m+parseFloat(d.amount),0)),S=I(()=>t(n)/t(x)*100);var w=le(),i=l(w),b=s(l(i),2),A=l(b,!0);r(b),r(i);var y=s(i,2),q=s(l(y),2),C=l(q,!0);r(q);var k=s(q,2);{var j=m=>{var d=se(),Y=l(d);r(d),D(W=>B(Y,`${W??""}% of income`),[()=>t(S).toFixed(0)]),_(m,d)};L(k,m=>{t(x)>0&&t(n)>0&&m(j)})}r(y);var E=s(y,2),O=s(l(E),2),U=l(O,!0);r(O),r(E),r(w),D((m,d,Y)=>{B(A,m),B(C,d),B(U,Y)},[()=>T(t(f).toString(),{compact:!0,currency:p.settings.currencyCode}),()=>T(t(n).toString(),{compact:!0,currency:p.settings.currencyCode}),()=>T(t(x).toString(),{compact:!0,currency:p.settings.currencyCode})]),_(g,w),M()}var ce=F('<div class="data-cell flex justify-between items-center relative svelte-ohqlh8"><p class="svelte-ohqlh8"> </p> <!></div> <!> <p class="data-cell svelte-ohqlh8"> </p> <p class="data-cell svelte-ohqlh8"> </p>',1);function ie(g,o){$(o,!0);let e=I(()=>Z(p.settings.currencyCode));async function v(b){await p.editBudget(o.budget.id,b)}var a=ce(),u=P(a),h=l(u),c=l(h,!0);r(h);var n=s(h,2);X(n,{class:"delete-btn",size:"small",variant:"ghost",onclick:()=>p.deleteBudget(o.budget.id),children:(b,A)=>{oe(b,{})},$$slots:{default:!0}}),r(u);var x=s(u,2);ae(x,{symbol:"$",get amount(){return t(e)},onUpdate:v});var f=s(x,2),S=l(f,!0);r(f);var w=s(f,2),i=l(w,!0);r(w),D((b,A)=>{var y;B(c,((y=o.budget.category)==null?void 0:y.title)??" "),B(S,b),B(i,A)},[()=>T(o.budget.totalSpent,{currency:p.settings.currencyCode}),()=>T(o.budget.remaining,{currency:p.settings.currencyCode})]),_(g,a),M()}var ve=F('<ul class="expense-table svelte-deo1l0"><p class="table-heading svelte-deo1l0">Category</p> <p class="table-heading svelte-deo1l0">Total</p> <p class="table-heading svelte-deo1l0">Spent</p> <p class="table-heading svelte-deo1l0">Remaining</p> <!></ul>');function ue(g,o){$(o,!1),K();var e=ve(),v=s(l(e),8);N(v,1,()=>p.budgets,a=>a.category.id,(a,u)=>{ie(a,{get budget(){return t(u)}})}),r(e),_(g,e),M()}var de=F('<button><i class="ph ph-plus"></i></button> <form><!> <!> <button class="btn btn-primary w-full">Add transaction</button></form>',1);function pe(g,o){$(o,!0);const e=new ee;let v=V(""),a;async function u(){a&&(await p.createBudget(t(v),a==null?void 0:a.id),e.open=!1)}var h=de(),c=P(h);Q(c,()=>({...e.trigger,class:"icon-btn icon-btn-medium icon-btn-grey"}));var n=s(c,2),x=()=>{};Q(n,()=>({...e.content,class:"popup-overlay space-y-2 bg-white max-w-[350px] w-full",onsubmit:x}));var f=l(n);re(f,{label:"Amount",get value(){return t(v)},set value(i){H(v,i,!0)}});var S=s(f,2);te(S,{label:"Categories",get items(){return p.categories},toOption:i=>({label:i.title,value:i.id}),onChange:i=>a=i});var w=s(S,2);w.__click=u,r(n),_(g,h),M()}G(["click"]);var ge=F('<section><header class="flex items-center justify-between"><h6>Budget</h6> <!></header> <!></section>');function me(g){var o=ge(),e=l(o),v=s(l(e),2);pe(v,{}),r(e);var a=s(e,2);ue(a,{}),r(o),_(g,o)}var he=F('<li class="svelte-kdwo4m"><div class="graph-bar mb-1.5 svelte-kdwo4m"></div> <p class="category-title"> </p> <p class="text-sm text-text-muted"> </p></li>'),fe=F('<section class="space-y-2"><h6>Income streams</h6> <ul class="svelte-kdwo4m"></ul></section>');function be(g,o){$(o,!1);const e=p.incomeAnalytics.sort((c,n)=>parseFloat(c.total)+parseFloat(n.total)).reverse(),v=e.reduce((c,n)=>c+parseFloat(n.total),0),a=["var(--color-blue-50)","var(--color-blue-100)","var(--color-blue-200)","var(--color-blue-300)","var(--color-blue-400)","var(--color-blue-500)","var(--color-blue-600)","var(--color-blue-700)","var(--color-blue-800)","var(--color-blue-900)"];K();var u=fe(),h=s(l(u),2);N(h,7,()=>e,c=>c.stream.id,(c,n,x)=>{var f=R(),S=P(f);{var w=i=>{const b=z(()=>parseFloat(t(n).total)/v*100),A=z(()=>a[(t(x)+5)%a.length]);var y=he(),q=l(y),C=s(q,2),k=l(C,!0);r(C);var j=s(C,2),E=l(j);r(j),r(y),D(O=>{J(y,`--percent: ${t(b)}; --bar-color: ${t(A)}`),J(q,`--percent: ${t(b)}; --bar-color: ${t(A)}`),B(k,t(n).stream.title),B(E,`${O??""}%`)},[()=>t(b).toFixed(2)]),_(i,y)};L(S,i=>{parseFloat(t(n).total)>0&&i(w)})}_(c,f)}),r(h),r(u),_(g,u),M()}var ye=F('<li class="category-title"> </li> <li class="graph-bar svelte-1iwcqu7"></li>',1),_e=F('<section class="space-y-2"><h6>Spending</h6> <ul class="svelte-1iwcqu7"></ul></section>');function xe(g,o){$(o,!1);const e=p.spendingAnaltics,v=Math.max(...e.map(c=>parseFloat(c.total))),a=["var(--color-purple-50)","var(--color-purple-100)","var(--color-purple-200)","var(--color-purple-300)","var(--color-purple-400)","var(--color-purple-500)","var(--color-purple-600)","var(--color-purple-700)","var(--color-purple-800)","var(--color-purple-900)"];K();var u=_e(),h=s(l(u),2);N(h,7,()=>e,c=>c.category.id,(c,n,x)=>{var f=R(),S=P(f);{var w=i=>{const b=z(()=>parseFloat(t(n).total)/v*100),A=z(()=>a[(t(x)+2)%a.length]);var y=ye(),q=P(y),C=l(q,!0);r(q);var k=s(q,2);D(()=>{B(C,t(n).category.title),J(k,`--percent: ${t(b)}%;--bar-color:${t(A)}`)}),_(i,y)};L(S,i=>{parseFloat(t(n).total)>0&&i(w)})}_(c,f)}),r(h),r(u),_(g,u),M()}var we=F('<main class="space-y-5 px-4 py-7 overflow-y-auto"><!> <div class="divider svelte-1m0gshv"></div> <!> <div class="divider svelte-1m0gshv"></div> <!> <div class="divider svelte-1m0gshv"></div> <!></main>');function Me(g){var o=we(),e=l(o);ne(e,{});var v=s(e,4);be(v,{});var a=s(v,4);xe(a,{});var u=s(a,4);me(u),r(o),_(g,o)}export{Me as component};
