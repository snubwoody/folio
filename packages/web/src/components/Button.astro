---
// Copyright (C) 2025 Wakunguma Kalimukwa
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program. If not, see <https://www.gnu.org/licenses/>.
import type { HTMLAttributes } from "astro/types";
import Link from "./Link.astro";
type Variant = "primary" | "secondary" | "neutral" | "bordered";
type Size = "medium";

type Props = {
    variant?: Variant,
    size?: Size,
    /**
	 * Converts the button into a link
	 */
    href?: string
} & HTMLAttributes<"button">;

const {
    variant = "primary",
    href,
    class: userClass,
    ...rest
}: Props = Astro.props;

// TODO: test passing in a custom class
// TODO: just add a ButtonStyle type share it between link and button
const buttonVariant = `btn-${variant} ${userClass}`;
---

{href ?
    <Link {href} class={`btn ${buttonVariant}`} {...rest}>
        <slot/>
    </Link>
    :
    <button class={`btn ${buttonVariant}`} {...rest}>
        <slot/>
    </button>
	}

<style>
	.btn{
		display: flex;
		gap: 8px;
		align-items: center;
		justify-content: center;
		transition: all 250ms;
		border-radius: var(--radius-md);
		padding: 8px 12px;
		cursor: pointer;

		svg{
			width: 16px;
			aspect-ratio: 1;
		}
	}

	.btn-primary{
		background-color: var(--color-surface-primary);
		color: var(--color-white);

		&:hover{
			background-color: var(--color-surface-primary-hover);
		}

		&:active{
			background-color: var(--color-surface-primary-active);
		}
	}

	.btn-secondary{
		background-color: var(--color-neutral-950);
		color: var(--color-white);

		&:hover{
			background-color: var(--color-neutral-900);
		}

		&:active{
			background-color: var(--color-neutral-800);
		}
	}

	.btn-bordered{
		border: 1px solid var(--color-neutral-50);

		&:hover{
			background-color: var(--color-neutral-25);
		}

		&:active{
			background-color: var(--color-neutral-50);
		}
	}

    .btn-neutral{
        background-color: var(--color-neutral-50);

		&:hover{
			background-color: var(--color-neutral-100);
		}

		&:active{
			background-color: var(--color-neutral-200);
		}
	}

</style>